<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="./css/api.css" />
    <style type="text/css">
        html,
        body {
            height: 100%;
            background-color: orange;
        }
        header{
          margin-top: 100px;
          text-align: center;
          background-color: #fff;
        }
    </style>
</head>

<body class="wrap">
  <header>
    未开发
  </header>
</body>
<script type="text/javascript" src="./script/api.js"></script>
<script type="text/javascript">
    const handleModle = (data) => {

        console.log(JSON.stringify(data))
        var listContact = api.require('listContact');
        data = data
        const  [y , h] = [100, 500]
        listContact.open({
            x: 0,
            y: y,
            w: api.frameWidth,
            h: h,
            imgCorner: 50,
            rightBtn: [{
                color: '#6C87FF',
                title: '取消关注',
                selectColor: '#6C87FF' //长按选中的值
            }],
            indicator: {
                bgColor: "#fff", //（可选项）背景色，字符串，默认透明，支持 rgb，rgba，#
                color: '#8B98A5' //（可选项）索引指器颜色,字符串类型，默认#A1A1A1,支持 rgb，rgba，#
            },
            cellBgColor: '#fff', //cell背景色
            borderColor: '#EDEFF7', //可选项）每个cell之间分割线的颜色
            groupTitle: {
                height: 30,
                bgColor: '#B8C5D2',
                color: "#f2f2f2"
            },
            data: data,
            fixedOn: api.frameName
        }, function(ret, err) {

            if (ret) {
              alert(JSON.stringify(ret));
                if (ret.clickType == 0) {
                    // 点击的回调
                }
                if (ret.clickType == 1) {
                    //左滑的回调
                }

            } else {
                alert(JSON.stringify(err));
            }
        });
    }
    apiready = function() {
        const rawData = api.readFile({
            sync: true,
            path: 'widget://res/data.json'
        });
        const data =  JSON.parse(rawData);
        handleModle(data)
            //输出Log，Log将显示在APICloud Studio控制台
            // console.log("Hello World! Hello APICloud!");
            //
            // var header = $api.dom('header'); // 获取 header 标签元素
            // var footer = $api.dom('footer'); // 获取 footer 标签元素
            //
            // // 1.修复开启沉浸式效果带来的顶部Header与手机状态栏重合的问题，最新api.js方法已支持适配iPhoneX；
            // // 2.默认已开启了沉浸式效果 config.xml中 <preference name="statusBarAppearance" value="true"/>
            // // 3.沉浸式效果适配支持iOS7+，Android4.4+以上版本
            // var headerH = $api.fixStatusBar(header);
            // // 最新api.js为了适配iPhoneX增加的方法，修复底部Footer部分与iPhoneX的底部虚拟横条键重叠的问题；
            // var footerH = $api.fixTabBar(footer);
            //
            // api.openFrame({
            //     name: 'main',
            //     url: 'html/main.html',
            //     bounces: true,
            //     rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
            //         marginTop: headerH, // main页面距离win顶部的高度
            //         marginBottom: footerH, // main页面距离win底部的高度
            //         w: 'auto' // main页面的宽度 自适应屏幕宽度
            //     }
            // });
            //
            // // 获取当前年份时间，并加载显示到页面
            // var year = $api.byId('year');
            // year.innerHTML = new Date().getFullYear();

    };
</script>

</html>
